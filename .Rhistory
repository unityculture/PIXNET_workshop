setwd('~/Downloads/r-presentation-template-master/')
ls
ls()
setwd('~/Downloads/r-presentation-template-master/')
dir()
library(knitr)
library(magrittr)
library(xtable)
library(dplyr)
library(ggplot2)
opts_chunk$set(echo = TRUE, cache=TRUE, comment="", cache.path = ".cache-EDA/")
fig <- function(path, size = 100) {
sprintf("<img src='img/%s' style='max-width: %d%%;max-height: %d%%'></img>",
path, size, size)
}
fig2 <- function(path, size = 100) {
sprintf("<img src='img/%s' style='width: %d%%'></img>",
path, size)
}
sys_name <- Sys.info()["sysname"] %>% tolower
sys_encode <- c("utf8", "utf8", "big5")[pmatch(sys_name, c("linux", "darwin", "windows"))]
sessionInfo() %>% capture.output %>% cat(file = "sessionInfo.log", sep = "\n")
transaction <- read.csv("data/transaction.csv")
transaction <- read.csv("data/transaction.csv")
head(transaction)
transaction <- as.data.table(transaction)
transaction <- data.table(transaction)
library(data.table)
transaction <- data.table(transaction)
transaction
build_ymd <- transaction$build_ymd
build_ymd %>% head()
year <- ifelse(str_length(build_ymd) == 6,
build_ymd %>% str_sub(1,2),
build_ymd %>% str_sub(1,3))
library(stringr)
year <- ifelse(str_length(build_ymd) == 6,
build_ymd %>% str_sub(1,2),
build_ymd %>% str_sub(1,3))
year
year %>% unique()
View(transaction)
str_sub?
?str_sub
str_sub(build_ymd, 5,-1)
str_sub(build_ymd, 1,-1)
str_sub(build_ymd, 4,-1)
str_sub(build_ymd, 4,-1)
str_sub(build_ymd, 1,-1)
str_sub(build_ymd, 1,-4)
str_sub(build_ymd, 1,-5)
str_sub(build_ymd, 1,-5) %>% unique()
year_unique <- year %>% unique() # echeck 年份是否合理？
library(tidyverse)
library(tidyverse)
library(stringr)
?tidyverse
year_unique == year_unique2
year_unique2 <- str_sub(build_ymd, 1,-5) %>% unique()
year_unique == year_unique2
any(year_unique == year_unique2)
?any
any(year_unique != year_unique2)
View(transaction)
build_type <- transaction$build_type
str_detect(build_type, '有電梯')
build_type %>% str_detect('有電梯') %>% head
build_type %>% str_detect('有電梯') %>% table
trac_type <- transaction$trac_type
trac_type %>% str_replace('(土地+建物)','')
trac_type %>% str_replace('\(土地\+建物\)','')
trac_type %>% str_replace('\\(土地\\+建物\\)','')
?str_replace
trac_type %>% str_replace('(土地+建物)','') %>% head
trac_type %>% str_replace('房地','') %>% head
View(transaction)
View(transaction)
fruits <- c(
"apples and oranges and pears and bananas",
"pineapples and mangos and guavas")
str_split(fruits, " and ")```
str_split(fruits, " and ")```
str_split(fruits, " and ")
str_split(fruits, " and ", simplify = TRUE)
str_split(fruits, " and ", simplify = TRUE)
?str_split
install.packages("stringr")
library(stringr)
library(knitr)
library(magrittr)
library(xtable)
library(dplyr)
library(ggplot2)
opts_chunk$set(echo = TRUE, cache=TRUE, comment="", cache.path = ".cache-EDA/")
fig <- function(path, size = 100) {
sprintf("<img src='img/%s' style='max-width: %d%%;max-height: %d%%'></img>",
path, size, size)
}
fig2 <- function(path, size = 100) {
sprintf("<img src='img/%s' style='width: %d%%'></img>",
path, size)
}
sys_name <- Sys.info()["sysname"] %>% tolower
sys_encode <- c("utf8", "utf8", "big5")[pmatch(sys_name, c("linux", "darwin", "windows"))]
sessionInfo() %>% capture.output %>% cat(file = "sessionInfo.log", sep = "\n")
str_split(fruits, " and ", simplify = TRUE)
str_split(fruits, " and ", simplify = TRUE)
str_split(fruits, " and ", simplify = TRUE)
trac_type <- transaction$trac_type
trac_type %>% str_replace('房地','') %>% head
?str_replace
trac_type %>% str_replace('(土地+建物)','',fixed = F) %>% head
trac_type %>% str_replace('(土地+建物)','',fix = F) %>% head
str_detect(c('AA1','A2','V3','AAA4'),'^AA')
str_detect(c('AA1','A2','V3','AAA4'),'^AA{2}')
str_detect(c('AA1','A2','V3','AAA4'),'^AA{3}')
str_detect(c('AA1','A2','V3','AAA4'),'^(AA){2}')
str_detect(c('AA1','A2','V3','AAA4','B21'),'1$')
str_detect(c('AA1','A2','V3','AAA4','ACA21'),'A.A')
str_detect('\AA','^\\\')
str_detect('\AA','^\\\\')
'\AA'
'\\AA'
'\.'
'\"'
'\''
str_detect('\\AA','^\\\\')
trac_type %>% str_replace('(土地+建物)','',fixed = F) %>% head
trac_type %>% str_replace('\\(土地\\+建物\\)','') %>% head
vignette(all = TRUE, package = "dplyr")
vignette(all = TRUE, package = "dplyr")
vignette(all = TRUE, package = "dplyr")
transaction
transaction %>% str()
transaction %>%
filter(city == '臺北市')
transcation %>% select(city, district, price_total)
transaction %>%
select(city, district, price_total)
transaction %>%
select(-c(city, district, price_total))
transaction %>% arrange(price_total) %>% head
transaction %>% arrange(price_total) %>% select(X,city, price_total) %>% head
transaction %>% arrange(desc(price_total)) %>%
select(X,city, price_total) %>% head
View(transaction)
6380000/105263
tmpiris <- mutate(transaction, price_per_unit = price_total/area_build)
transaction %>%
mutate(transaction, price_per_unit = price_total/area_build)
transaction %>%
mutate(price_per_unit = price_total/area_build)
View(transaction)
transaction_new <- transaction %>%
mutate(price_per_unit = price_total/area_build)
transaction_new %>% select(price_total, area_build, price_per_unit)
transaction_new %>% select(price_total, area_build, price_per_unit) %>% head
?summarise
transaction %>%
group_by(city) %>%
summarise(n = n(), mean = mean(price_unit))
transaction %>%
group_by(city) %>%
summarise(n = n(), mean = mean(price_unit, na.rm=T))
transaction %>%
group_by(city) %>%
summarise(max_price = max(price_unit))
transaction %>%
group_by(city) %>%
summarise(max_price = max(price_unit, na.rm=T))
View(transaction_new)
transaction %>%
filte(city == '臺北市') %>%
group_by(district) %>%
summarise(mean = mean(price_unit, na.rm = T))
transaction %>%
filter(city == '臺北市') %>%
group_by(district) %>%
summarise(mean = mean(price_unit, na.rm = T))
transaction %>%
filter(city == '臺北市') %>%
group_by(district, build_type) %>%
summarise(mean = mean(price_unit, na.rm = T))
1
vignette('tidyr')
vignette('all',package='tidyr')
?vignette()
vignette(all = T,package='tidyr')
vignette(package='tidy-data')
vignette('tidy-data')
?spread
library(tidyr)
?spread
data.frame(id = c(1,1,2,2,3,3),
sex = c(rep('female',2),rep('male',4)),
score = c(41, 47, 53, 63, 54, 58))
rep(c('math','science'))
rep(c('math','science'), 5)
rep(c('math','science'), 3)
?rep
rep(c('math','science'), times = 3)
rep(c('math','science'), length.out = 3)
rep(c('math','science'), length.out = 5)
long <- data.frame(id = c(1,1,2,2,3,3),
sex = c(rep('female',2),rep('male',4)),
class = rep(c('math','science'), length.out = 5),
score = c(41, 47, 53, 63, 54, 58))
long %>% spread(class, score)
long <- data.frame(id = c(1,1,2,2,3,3),
sex = c(rep('female',2),rep('male',4)),
class = rep(c('math','science'), length.out = 5),
score = c(41, 47, 53, 63, 54, 58))
class = rep(c('math','science'), length.out = 5)
class
rm(class)
long <- data.frame(id = c(1,1,2,2,3,3),
sex = c(rep('female',2),rep('male',4)),
class = rep(c('math','science'), length.out = 6),
score = c(41, 47, 53, 63, 54, 58))
long %>% spread(class, score)
wide <- long %>% spread(class, score)
wide
wide %>%
gather(-c(od,sex))
wide %>%
gather(-c(od,sex), 'class', 'value')
wide %>%
gather('class', 'value', -c(od,sex))
wide %>%
gather('class', 'value', -c(id,sex))
?gather
?spread
transaction %>%
filter(city == '臺北市') %>%
group_by(district, build_type) %>%
summarise(mean = mean(price_unit, na.rm = T)) %>%
spread(build_type, mean)
View(transaction_new)
transaction %>%
filter(build_type %>% str_detect('有電梯'))
transaction %>%
filter(build_type %>% str_detect('有電梯')) %>%
head
library(DT)
transaction %>%
filter(build_type %>% str_detect('有電梯')) %>%
head %>% datatable()
power_data <- read.csv('20160426_data.csv')
transaction <- read.csv("/Users/hsiaoling/Desktop/data/transaction.csv") #如果你是mac
transaction <- read.csv("/Users/sheng/Documents/DSP/PIXNET_workshop/data/transaction.csv")
View(transaction)
transaction <- read.csv("data/transaction.csv")
transaction %>% datatable
?div
1
write.csv(head(transaction), "transaction_head.csv", row.names=FALSE,quote=FALSE)
transaction %>% head %>%
datatable(
extensions = 'FixedColumns',
options = list(dom = 't', scrollX = TRUE, fixedColumns = TRUE))
dim(transaction)
transaction %>% head
transaction %>% head %>% View
tbl()
transaction %>% head %>% tbl()
?tbl
transaction %>% head %>% tbl_df()
tidyverse_update(recursive = FALSE)
tidyverse::tidyverse_update(recursive = FALSE)
tidyverse::tidyverse_update(recursive = T)
tidyverse::tidyverse_update(recursive = F)
tidyverse::tidyverse_update(recursive = T)
tidyverse::tidyverse_update(recursive = F)
kable(transactionhead)
library(xtable)
print(xtable(transaction), type = 'html', html.table.attributes = '')
print(xtable(transaction %>% head), type = 'html', html.table.attributes = '')
lin.gg
transaction %>%
filter(build_type %>% str_detect('有電梯')) %>%
head %>%
datatable()
transaction %>%
filter(build_type %>% str_detect('有電梯')) %>%
head %>%
lin.
transaction %>%
filter(build_type %>% str_detect('有電梯')) %>%
head %>%
datatable(options = list(
initComplete = JS(
"function(settings, json) {",
"$(this.api().table().header()).css({'background-color': '#000', 'color': '#fff'});",
"}")
))
transaction %>%
filter(build_type %>% str_detect('有電梯')) %>%
head %>%
datatable(options = list(
initComplete = JS(
"function(settings, json) {",
"$(this.api().table().header()).css({'background-color': '#000', 'color': '#fff'});",
"}")
),
extensions = 'FixedColumns',
options = list(dom = 't',scrollX = TRUE,fixedColumns = TRUE))
transaction %>%
filter(build_type %>% str_detect('有電梯')) %>%
head %>%
datatable(options = list(
options = list(dom = 't',scrollX = TRUE, fixedColumns = TRUE),
initComplete = JS(
"function(settings, json) {",
"$(this.api().table().header()).css({'background-color': '#000', 'color': '#fff'});",
"}")
),
extensions = 'FixedColumns')
transaction %>%
filter(city == '臺北市') %>%
group_by(district, build_type) %>%
summarise(mean = mean(price_unit, na.rm = T)) %>%
datatable(options = list(dom = 't',scrollX = TRUE, fixedColumns = TRUE,initComplete = JS("function(settings, json) {","$(this.api().table().header()).css({'background-color': '#000', 'color': '#fff'});","}")),extensions = 'FixedColumns')
transaction %>%
filter(city == '臺北市') %>%
group_by(district, build_type) %>%
summarise(mean = mean(price_unit, na.rm = T)) %>%
datatable(options = list(dom = 't',scrollX = TRUE, fixedColumns = TRUE,initComplete = JS("function(settings, json) {","$(this.api().table().header()).css({'background-color': '#000', 'color': '#fff'});","}")),extensions = 'FixedColumns')
fish<-read.table("/Users/sheng/Documents/NCCU/ML/NCCU_ML_Note/lab/20151216_fisher.txt",h=T)
library(biotools)
install.packages('biotools')
library(biotools)
library(biotools)
?tcltk
boxM(iris[,-5],iris$Species)
chooseCRANmirror()
remove.packages('biotools')
library(biotools)
install.packages()
install.packages('biotools')
chooseCRANmirror()
install.packages('biotools')
